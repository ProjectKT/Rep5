<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=EUC-JP">
  <title>知能プログラミング演習IIグループ作成 レポート</title>
</head>

<!-- このグループ作成資料は，同じファイルを全員のGrepX（Grep5やGrep6等）ディレクトリにコピーして置くこと -->

<body>
<center><h1>知能プログラミング演習II グループ作成レポート</h1></center>

<h3>[名前・学籍番号]</h3>
<!-- グループ全員の名前, 学籍番号を書き，個人作成書類へのリンクを張る -->
<ul>
  <li><a href="../../../../cjh15067/workspace/kprep/rep5/index.html">佐藤清隆 24115067</a>: フレームのGUIレイアウト担当</li>
  <li><a href="../../../../cjh15088/workspace/kprep/rep5/index.html">寺部和紀 24115088</a>: フレームのデモン担当</li>
  <li><a href="../../../../cjh15109/workspace/kprep/rep5/index.html">早川駿 2411109</a>: フレームのデモン担当</li>
  <li><a href="../../../../cjh15110/workspace/kprep/rep5/index.html">林幸汰 2411110</a>: フレームのGUI担当、質問応答システム担当</li>
  <li><a href="../../../../cjh15113/workspace/kprep/rep5/index.html">林政行 2411113</a>: セマンティック担当</li>
</ul>

<h3>[役割分担]</h3>
<!-- 役割分担を書く．-->
<ul>
  <li>佐藤清隆 : フレームのGUIレイアウト担当</li>
  <li>寺部和紀 : フレームのデモン担当</li>
  <li>早川　駿 : フレームのデモン担当</li>
  <li>林　幸汰 : フレームのGUI、質問応答システム担当</li>
  <li>林　政行 : セマンティック全般、フレームのGUIの基礎作成担当</li>
</ul>



<h3>[ソースファイル]</h3>
<ul>
  <li><a href="../../Rep5/src/content/Observable.java">Observable.java</a></li>
  <li><a href="../../Rep5/src/content/Observer.java">Observ.java</a></li>
  <li><a href="../../Rep5/src/Frame/AIClassFrame.java">AIClassFrame.java</a></li>
  <li><a href="../../Rep5/src/Frame/AIDemonProc.java">AIDemonProc.java</a></li>
  <li><a href="../../Rep5/src/Frame/AIDemonProcs.java">AIDemonProcs.java</a></li>
  <li><a href="../../Rep5/src/Frame/AIFrame.java">AIFrame.java</a></li>
  <li><a href="../../Rep5/src/Frame/AIFrameSystem.java">AIFrameSystem.java</a></li>
  <li><a href="../../Rep5/src/Frame/AIInstanceFrame.java">AIInstanceFrame.java</a></li>
  <li><a href="../../Rep5/src/Frame/AISlot.java">AISlot.java</a></li>
  <li><a href="../../Rep5/src/Frame/AIWhenConstructedProc.java">AIWhenConstructedProc.java</a></li>
  <li><a href="../../Rep5/src/Frame/FrameQASystem2.java">FrameQASystem2.java</a></li>
  <li><a href="../../Rep5/src/Frame/OurFrameSystem.java">OurFrameSystem.java</a></li>
  <li><a href="../../Rep5/src/semanticnet/Link.java">Link.java</a></li>
  <li><a href="../../Rep5/src/semanticnet/Node.java">Node.java</a></li>
  <li><a href="../../Rep5/src/semanticnet/OurSemanticNet.java">OurSemanticNet.java</a></li>
  <li><a href="../../Rep5/src/semanticnet/SemanticNet.java">SemanticNet.java</a></li>
  <li><a href="../../Rep5/src/ui/components/input/MapDragListener.java">MapDragListener.java</a></li>
  <li><a href="../../Rep5/src/ui/components/input/MapZoomListener.java">MapZoomListener.java</a></li>
  <li><a href="../../Rep5/src/ui/components/AIFrameLayout0.java">AIFrameLayout0.java</a></li>
  <li><a href="../../Rep5/src/ui/components/AIFramePanel0.java">AIFramePanel0.java</a></li>
  <li><a href="../../Rep5/src/ui/components/MapComponent.java">MapComponent.java</a></li>
  <li><a href="../../Rep5/src/ui/components/MapLayout.java">MapLayout.java</a></li>
  <li><a href="../../Rep5/src/ui/components/MapPanel.java">MapPanel.java</a></li>
  <li><a href="../../Rep5/src/ui/components/SemanticNetLayout.java">SemanticNetLayout.java</a></li>
  <li><a href="../../Rep5/src/ui/components/SemanticNetPanel.java">SemanticNetPanel.java</a></li>
  <li><a href="../../Rep5/src/ui/components/UIFrame.java">UIFrame.java</a></li>
  <li><a href="../../Rep5/src/ui/components/UILeanker.java">UILeanker.java</a></li>
  <li><a href="../../Rep5/src/ui/components/UINode.java">UINode.java</a></li>
  <li><a href="../../Rep5/src/ui/components/UISlot.java">UISlot.java</a></li>
  <li><a href="../../Rep5/src/ui/AIFrameGUI0.java">AIFrameGUI0.java</a></li>
  <li><a href="../../Rep5/src/ui/PoorGUI.java">PoorGUI.java</a></li>
  <li><a href="../../Rep5/src/ui/SemanticUI.java">SemanticUI.java</a></li>
  <li><a href="../../Rep5/src/util/ArrayUtils.java">ArrayUtils.java</a></li>
  <li><a href="../../Rep5/src/util/SemanticNetUtils.java">SemanticNetUtils.java</a></li>
  <li><a href="../../Rep5/dbpedia_classes.txt">dbpedia_classes.txt</a></li>
  <li><a href="../../Rep5/kt_classes.txt">kt_classes.txt</a></li>
  <li><a href="../../Rep5/kt_instances.txt">kt_instances.txt</a></li>
  <li><a href="../../Rep5/nagoya_instances.txt">nagoya_instances.txt</a></li>
  <li><a href="../../Rep5/Semantic067.txt">Semantic067.txt</a></li>
  <li><a href="../../Rep5/Semantic088.txt">Semantic088.txt</a></li>
  <li><a href="../../Rep5/Semantic109.txt">Semantic109.txt</a></li>
  <li><a href="../../Rep5/Semantic110.txt">Semantic110.txt</a></li>
  <li><a href="../../Rep5/Semantic113.txt">Semantic113.txt</a></li>
  <li><a href="../../Rep5/SemanticSample.txt">SemanticSample.txt</a></li>
<!-- 実装・変更したソースファイルへのリンク．修正する． -->
<!-- ※ リンクは絶対パスに変更せず，上記のような相対パスのままで！ -->
</ul>

<hr>

<h3>[課題]</h3>
<!-- 課題を書く．-->

<pre>
    [必須課題5-1] セマンティックネットのプログラムを参考に，自分達（グループメンバー）についてのセマンティックネットを構築せよ（教科書p.101 練習問題1）。

    [必須課題5-2] フレームのプログラムを参考に，自分達の家族や親戚，知人等について関連する知識をフレームで表現せよ。
    また，この家族・親戚フレームを用いた質問応答システムを作成せよ（教科書p.101 練習問題2）。

    [必須課題5-3] セマンティックネットやフレームの関係を図として示すためのユーザインターフェース(GUI) を設計し実装せよ（教科書p.101 練習問題3）。


    [発展課題5-4] DBpedia Japaneseは，Wikipedia日本語版から生成された知識表現から成る巨大なデータベースである．
    上記5-2で作成した質問応答システムを，DBpedia中の知識を使って質問に答えられるよう，拡張せよ．
</pre>
<h3>[独自仕様の説明]</h3>
<!--
 もし自分で独自に決めた仕様があれば，その説明を書く．
-->
各自の個人レポートに記入


<h3>[プログラムの構造]</h3>
<!--  どのような設計をしたか．-->
<pre>
AIFrameGUI0
|
|-initialize
|
|-setupMapPanel
|
|-setupCommodPanel
|
|-printHumanName
|
|-valueChanged
|
|-actionPerformed
|
|-main


AIFrameLayout0
|
|-removeLayoutComponent
|
|-preferredLayoutSize
|
|-layoutContainer
|
|-addLayoutComponent
|
|-layoutUIFrame
|
|-clear


AIFramePanel0
|
|-showFramesFor
|
|-addFrame
|
|-clear
|
|-searchUP
|
|-searchDown
|
|-highlightRelatedFrames
|
|-doPaintComponent
|
|-drawline
</pre>

<h3>[実装の説明]</h3>
<!-- 
 どう実装したか，ソースコードを詳細に説明する．
 特に重要な箇所はレポートにペーストして説明する．
-->
<pre>
<h4>[AIFramePanel,AIFrameLayout]</h4>
AIFramePanel0 てフレーム間の線を引いたりフレームの関係を調べる。
AIFrameLayout0ではフレームの配置を決定している。
</pre>
<h4>[AIDemonProcs]</h4>
<pre>
質疑応答システムについてデモンを使うことにした。
デモンを使うことによって矛盾が生じにくくなる。
また、少ないスロット(今回の場合は親のスロットのみ)で家族構成を検索することができる。
そのため、記入する量が減らすことができる。

ここでデモンの実装の仕方について書く。

まず条件を満たすものを入れるリストrelistを用意する。
次の文で自分の親が登録されているかチェックする。

			//自分の親が登録されているかチェック
			if (!(inFrame.readSlotValue(inFrameSystem, "親", false) == null)){

フレームから親の名前を取ってきてリストolistに入れる。
親の数(普通は2)だけループさせ、olistからひとりずつ親の名前を取り出し、その名前を元にフレームを取ってくる。
上と同じようにして親(祖父母)が登録されているかチェックし、名前をリストに入れ、祖父母の数だけループさせる。
祖父母の逆リンクから子供の名前(祖父母を親だと見て接続している名前)を取ってきてリストklistに入れる。klistには親の兄弟(自分の親も含む)の名前が入ることになる。

			// 親の逆リンクから子供の名前(自分を親だと見て接続している名前)をとってくる
			// klistは兄弟の名前のリスト
			ArrayList klist = gparentframe.getLeankersSlotNames("親");

klistに入っている名前からフレームを取ってきて、それが自分の親でなく、かつ、性別スロットの値が「男」の場合はおじなのでrelistに格納する。(前のループで登録されていない場合のみ)
最後にrelistを返すが、relistのサイズが0だった場合は対象が登録されていないということなのでメッセージを入れてから返す。

			 if(relist.size()==0)
				 relist.add("登録されていないため分からない");
			return AIFrame.makeEnum(new ArrayList(relist));

</pre>

<ul>
<FONT color="#708090"><h4>[必須課題5-2＆発展課題5-4]</h4></FONT>
<ul>
<FONT color="#4169E1"><h4>[AIFrame]</h4></FONT>
<li>leankersというHashMapを追加し、自分に対しリンクを持っているフレームを記憶できるようにした。(逆方向のリンク)
<li>mSlotsにあるスロットの数を返すメソッドを追加、またmSlotsの指定された位置のスロット名を返すメソッドを追加し外部からスロットの中身を確認しやすくした。
<li>指定されたスロットの中身をArrayListとして返すメソッドを追加した。
<FONT color="#4169E1"><h4>[AIDemonProcs]</h4></FONT>
<li>今回の課題5-2に合わせた仕様として家族親戚の情報のスロットを各個人のスロットにいれるのでは無く、上位の人間の概念クラスのデモン手続きとして登録した。<br>具体的には各個人のフレームにはその人の親、誕生日、性別をかならず登録する(逆に言えば人のインスタンスのフレームには親の情報しか家族関係の情報を入れない)。<br>たとえば兄がいる人はその人に兄スロットがあるのでは無く、人間クラスにある兄を求めるデモンを使うことで親の情報などを元に兄を求めることができる。<br>
これにより弟からは兄として登録されているのに、弟の方では兄が登録されていないという矛盾が起きない<br>
また個人のインスタンスの登録の時必要な情報が少ないのでデータ記入の際に楽ができる。
<FONT color="#4169E1"><h4>[FrameQASystem2]</h4></FONT>
<li>「名古屋市の隣接自治体の隣接自治体の花は？」といった質問に対応できるような質問応答システムにした。<br>
「の」と「は？」を使うと名称の一部と区別できないのでそれぞれスペースと？で対応し「名古屋市　隣接自治体　隣接自治体　花？」といった質問を受け付けるようにした。<br>
<li>「(フレーム名)？」でそのフレームのスロット名そのスロット内の値全てと逆リンクを張っているフレームを全て表示するようにした。</ul>
</ul><ul>
<FONT color="#708090"><h4>[必須課題5-3]</h4></FONT>
今回必須課題5-2で作ったデモン手続きを生かした家族、親戚の関係を表すフレームシステムはデモンありきなのに対し、応用課題5-4はデモンではなくそれぞれのインスタンスのスロットありきなので、それぞれに合わせた二つのGUIを設計した。<br>
<ul>
<FONT color="#4169E1"><h4>[AIFrameGUI0]</h4></FONT>
　必須課題5-2の家族親戚フレームを図で理解できることに特化させて設計したGUI、登録されている人の名前を入力し検索すると、簡易的なその人の家系図が表示される。<br>
　その状態で姉、従兄弟などの親戚関係をリストから選択すると対応する人物の表示の色が変わりそのひとの親戚や家族が視覚的にわかりやすく調べることができる。<br>
　当然色の変更には必須課題5-2で作成したデモンを活用している。<br>
　家系図に表示する人は検索にかけられた人から上の世代、下の世代それぞれ二回までの移動で見つかる人<br>
<FONT color="#4169E1"><h4>[PoorGUI]</h4></FONT>
　応用課題5-4での名古屋のデータをツリー構造で表示するGUI、はじめに登録されているフレームを表示し、フレームのスロットのなかでフレームとして登録されているものをトリプルクリックすると、そのフレームがされに展開されくわしいフレームの関係を見ることとができる。<br>
　完全にJTreeそのものな表示なのでおもしろみがないかもしれない。
</ul>
</ul>
<h3>[実行例]</h3>
<!-- 実行例を示す．PNGやGIF等の絵を張っても良い．-->
各自の個人レポート記入

<h3>[グループでの考察]</h3>
<!-- 
グループ作成書類に書くように指定された考察事項があれば書く．
もし指定された考察事項がなければ，個人作成課題に考察を書けばよい．
-->




<hr>



<h3>[参考文献]</h3>

<!-- 参考文献を書く．助けてもらった人がいれば，それも書く-->


</body>
</html>
